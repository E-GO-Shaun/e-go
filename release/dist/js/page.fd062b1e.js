(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page"],{"124f":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"social-container"},[t("div",{on:{click:function(t){return e.handleClick("github")}}},[t("span",{staticClass:"container",style:{backgroundColor:"#61676D"}},[t("i",{staticClass:"iconfont icongithub",attrs:{"icon-class":"github"}})]),t("p",{staticClass:"title"},[e._v(e._s(e.$t("login.github")))])]),t("div",{on:{click:function(t){return e.handleClick("gitee")}}},[t("span",{staticClass:"container",style:{backgroundColor:"#c35152"}},[t("i",{staticClass:"iconfont icongitee2",attrs:{"icon-class":"gitee"}})]),t("p",{staticClass:"title"},[e._v(e._s(e.$t("login.gitee")))])]),t("div",{on:{click:function(t){return e.handleClick("wechat_open")}}},[t("span",{staticClass:"container",style:{backgroundColor:"#8dc349"}},[t("i",{staticClass:"iconfont icon-weixin",attrs:{"icon-class":"wechat"}})]),t("p",{staticClass:"title"},[e._v(e._s(e.$t("login.wechat")))])]),t("div",{on:{click:function(t){return e.handleClick("qq")}}},[t("span",{staticClass:"container",style:{backgroundColor:"#6ba2d6"}},[t("i",{staticClass:"iconfont icon-qq",attrs:{"icon-class":"qq"}})]),t("p",{staticClass:"title"},[e._v(e._s(e.$t("login.qq")))])])])},r=[],i=n("1ca4"),s={name:"thirdLogin",methods:{handleClick:function(e){window.location.href="".concat(i["a"].authUrl,"/").concat(e)}}},a=s,l=(n("460f"),n("2877")),c=Object(l["a"])(a,o,r,!1,null,"7ac1e600",null);t["default"]=c.exports},"15c5":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lock-container"},[t("div",{staticClass:"lock-form animated bounceInDown"},[t("div",{staticClass:"animated",class:{shake:e.passwdError,bounceOut:e.pass}},[t("h3",{staticClass:"title"},[e._v(e._s(e.userInfo.username))]),t("el-input",{staticClass:"input-with-select animated",attrs:{placeholder:"请输入登录密码",type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.passwd,callback:function(t){e.passwd=t},expression:"passwd"}},[t("el-button",{attrs:{slot:"append",icon:"icon-bofangqi-suoping"},on:{click:e.handleLogin},slot:"append"}),t("el-button",{attrs:{slot:"append",icon:"icon-tuichu"},on:{click:e.handleLogout},slot:"append"})],1)],1)])])},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),s=n("5880");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={name:"lock",data:function(){return{passwd:"",passwdError:!1,pass:!1}},created:function(){},mounted:function(){},computed:l(l({},Object(s["mapState"])({userInfo:function(e){return e.user.userInfo}})),Object(s["mapGetters"])(["tag","lockPasswd"])),props:[],methods:{handleLogout:function(){var e=this;this.$confirm("是否退出系统, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$store.dispatch("LogOut").then((function(){e.$router.push({path:"/login"})}))}))},handleLogin:function(){var e=this;if(this.passwd!==this.lockPasswd)return this.passwd="",this.$message({message:"解锁密码错误,请重新输入",type:"error"}),this.passwdError=!0,void setTimeout((function(){e.passwdError=!1}),1e3);this.pass=!0,setTimeout((function(){e.$store.commit("CLEAR_LOCK"),e.$router.push({path:e.$router.$avueRouter.getPath({src:e.tag.value})})}),1e3)}},components:{}},u=c,d=(n("ea87"),n("2877")),p=Object(d["a"])(u,o,r,!1,null,null,null);t["default"]=p.exports},"173c":function(e,t,n){"use strict";n("8d82")},"21b1":function(e,t,n){},"253e":function(e,t,n){},"460f":function(e,t,n){"use strict";n("253e")},5596:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{ref:"login",staticClass:"login-container",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}}},[t("top-color",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]}),t("div",{staticClass:"login-out-weaper"},[t("div",{staticClass:"login-logo-title"}),"user"===e.activeName?t("userLoginNew"):e._e()],1)],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("28a5"),n("6762"),n("2fdb"),n("ade3")),s=n("6cf7"),a=n("7c05"),l=n("acd4"),c=n("124f"),u=n("5880"),d=n("84df"),p=n("c54a"),f=n("c7cc"),g=n("44b2"),m=n("0e0b");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={name:"login",components:{userLoginNew:s["default"],userLogin:a["default"],codeLogin:l["default"],thirdLogin:c["default"],topLang:f["default"],topColor:g["default"]},data:function(){return{time:"",activeName:"user",socialForm:{tenantId:"000000",source:"",code:"",state:""}}},watch:{$route:function(){this.handleLogin()}},created:function(){this.handleLogin(),this.getTime()},mounted:function(){},computed:b({},Object(u["mapGetters"])(["website","tagWel"])),props:[],methods:{getTime:function(){var e=this;setInterval((function(){e.time=Object(d["b"])(new Date)}),1e3)},handleLogin:function(){var e=this,t=Object(m["e"])(),n="/oauth/redirect/";if(this.socialForm.source=Object(m["d"])("source"),this.socialForm.code=Object(m["d"])("code"),this.socialForm.state=Object(m["d"])("state"),Object(p["k"])(this.socialForm.source)&&t.includes(n)){var o=t.split("?")[0];o=o.split(n)[1],this.socialForm.source=o}if(!Object(p["k"])(this.socialForm.source)&&!Object(p["k"])(this.socialForm.code)&&!Object(p["k"])(this.socialForm.state)){var r=this.$loading({lock:!0,text:"第三方系统登录中,请稍后。。。",spinner:"el-icon-loading"});this.$store.dispatch("LoginBySocial",this.socialForm).then((function(){window.location.href=t.split(n)[0],e.$router.push({path:e.tagWel.value}),r.close()})).catch((function(){r.close()}))}}}},v=y,O=(n("fd8e"),n("2877")),w=Object(O["a"])(v,o,r,!1,null,null,null);t["default"]=w.exports},"611b":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"error-page"},[t("div",{staticClass:"img",staticStyle:{"background-image":"url('/img/bg/500.svg')"}}),t("div",{staticClass:"content"},[t("h1",[e._v("500")]),t("div",{staticClass:"desc"},[e._v("抱歉，服务器出错了")]),t("div",{staticClass:"actions"},[t("router-link",{attrs:{to:{path:"/"}}},[t("el-button",{attrs:{type:"primary"}},[e._v("返回首页")])],1)],1)])])},r=[],i={name:"error-500"},s=i,a=(n("9f58"),n("2877")),l=Object(a["a"])(s,o,r,!1,null,"55c86129",null);t["default"]=l.exports},"628c":function(e,t,n){},6299:function(e,t,n){},"65e2":function(e,t,n){},"6c7be":function(e,t,n){"use strict";n("65e2")},"6cf7":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[e.tenantMode?t("el-form-item",{attrs:{prop:"tenantId"}},[t("el-row",{attrs:{span:24}},[t("el-col",{staticClass:"bg-common bg-tenant",attrs:{span:24}},[t("el-input",{staticClass:"bg-input",attrs:{size:"small",oninput:"value=value.replace(/[^0-9.]/g,'')","auto-complete":"off",placeholder:e.$t("login.tenantId")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.tenantId,callback:function(t){e.$set(e.loginForm,"tenantId",t)},expression:"loginForm.tenantId"}})],1)],1)],1):e._e(),t("el-form-item",{attrs:{prop:"username"}},[t("el-row",{attrs:{span:24}},[t("el-col",{staticClass:"bg-common bg-user",attrs:{span:24}},[t("el-input",{staticClass:"bg-input",attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.username")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1)],1)],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-row",{staticClass:"bg-common bg-password",staticStyle:{"margin-left":"0px","margin-right":"0px",height:"40px"},attrs:{gutter:"24"}},[t("el-col",{attrs:{span:"20"}},[t("el-input",{staticClass:"bg-input",attrs:{size:"small",type:e.passwordType,"auto-complete":"off",placeholder:e.$t("login.password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-col",{staticStyle:{float:"left"},attrs:{span:"2"}},[t("i",{staticClass:"el-icon-view",staticStyle:{color:"white"},on:{click:e.showPassword}})])],1)],1),this.website.captchaMode?t("el-form-item",{attrs:{prop:"code"}},[t("el-row",{attrs:{span:24}},[t("el-col",{staticClass:"bg-common bg-captcha",attrs:{span:24}},[t("el-row",[t("el-col",{attrs:{span:16}},[t("el-input",{staticClass:"bg-input",attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.code")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1),t("el-col",{attrs:{span:1}},[t("el-image",{staticStyle:{height:"24px","margin-top":"7px"},attrs:{src:"/img/bg/a03_14.png"}})],1),t("el-col",{attrs:{span:5}},[t("div",{staticClass:"login-code"},[t("img",{staticClass:"login-code-img",attrs:{src:e.loginForm.image},on:{click:e.refreshCode}})])])],1)],1)],1)],1):e._e(),t("el-form-item",[t("el-row",{attrs:{span:24}},[t("el-col",{attrs:{span:24}},[t("div",{staticStyle:{position:"relative"}},[t("img",{staticClass:"bg-btn",attrs:{src:"/img/bg/a03_03_12.png",title:"sda"},on:{click:e.handleLogin}}),t("div",{staticClass:"btn-img-content",on:{click:e.handleLogin}},[e._v("登录")])])])],1)],1)],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),s=(n("6762"),n("2fdb"),n("5880")),a=n("ccbe"),l=n("c24f"),c=n("0e0b");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"userlogin",data:function(){return{tenantMode:this.website.tenantMode,loginForm:{tenantId:"771877",deptId:"",roleId:"",username:"admin",password:"",type:"account",code:"",key:"",image:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},loginRules:{tenantId:[{required:!1,message:"请输入租户ID",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,message:"密码长度最少为6位",trigger:"blur"}]},passwordType:"password",userBox:!1,userForm:{deptId:"",roleId:""},userOption:{labelWidth:70,submitBtn:!0,emptyBtn:!1,submitText:"登录",column:[{label:"部门",prop:"deptId",type:"select",props:{label:"deptName",value:"id"},dicUrl:"/api/blade-system/dept/select",span:24,display:!1,rules:[{required:!0,message:"请选择部门",trigger:"blur"}]},{label:"角色",prop:"roleId",type:"select",props:{label:"roleName",value:"id"},dicUrl:"/api/blade-system/role/select",span:24,display:!1,rules:[{required:!0,message:"请选择角色",trigger:"blur"}]}]}}},created:function(){this.getTenant(),this.refreshCode()},mounted:function(){},watch:{"loginForm.deptId":function(){var e=this.findObject(this.userOption.column,"deptId");this.loginForm.deptId.includes(",")?(e.dicUrl="/api/blade-system/dept/select?deptId=".concat(this.loginForm.deptId),e.display=!0):e.dicUrl=""},"loginForm.roleId":function(){var e=this.findObject(this.userOption.column,"roleId");this.loginForm.roleId.includes(",")?(e.dicUrl="/api/blade-system/role/select?roleId=".concat(this.loginForm.roleId),e.display=!0):e.dicUrl=""}},computed:d({},Object(s["mapGetters"])(["tagWel","userInfo"])),props:[],methods:{refreshCode:function(){var e=this;this.website.captchaMode&&Object(l["getCaptcha"])().then((function(t){var n=t.data;e.loginForm.key=n.key,e.loginForm.image=n.image}))},showPassword:function(){""===this.passwordType?this.passwordType="password":this.passwordType=""},submitLogin:function(e,t){""!==e.deptId&&(this.loginForm.deptId=e.deptId),""!==e.roleId&&(this.loginForm.roleId=e.roleId),this.handleLogin(),t()},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(t){var n=e.$loading({lock:!0,text:"登录中,请稍后。。。",spinner:"el-icon-loading"});e.$store.dispatch("LoginByUsername",e.loginForm).then((function(){if(e.website.switchMode){var t=e.userInfo.dept_id,o=e.userInfo.role_id;if(t.includes(",")||o.includes(","))return e.loginForm.deptId=t,e.loginForm.roleId=o,e.userBox=!0,n.close(),!1}e.$router.push({path:e.tagWel.value}),n.close()})).catch((function(){n.close(),e.refreshCode()}))}}))},getTenant:function(){var e=this,t=Object(c["e"])();console.log("domain:",t),Object(a["info"])(t).then((function(t){var n=t.data;console.log("data:",n),n.success&&n.data.tenantId&&(e.tenantMode=!1,e.loginForm.tenantId=n.data.tenantId)}))}}},f=p,g=n("2877"),m=Object(g["a"])(f,o,r,!1,null,null,null);t["default"]=m.exports},"7c05":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[e.tenantMode?t("el-form-item",{attrs:{prop:"tenantId"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.tenantId")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.tenantId,callback:function(t){e.$set(e.loginForm,"tenantId",t)},expression:"loginForm.tenantId"}},[t("i",{staticClass:"icon-quanxian",attrs:{slot:"prefix"},slot:"prefix"})])],1):e._e(),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.username")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[t("i",{staticClass:"icon-yonghu",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{size:"small",type:e.passwordType,"auto-complete":"off",placeholder:e.$t("login.password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[t("i",{staticClass:"el-icon-view el-input__icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"}),t("i",{staticClass:"icon-mima",attrs:{slot:"prefix"},slot:"prefix"})])],1),this.website.captchaMode?t("el-form-item",{attrs:{prop:"code"}},[t("el-row",{attrs:{span:24}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.code")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[t("i",{staticClass:"icon-yanzhengma",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"login-code"},[t("img",{staticClass:"login-code-img",attrs:{src:e.loginForm.image},on:{click:e.refreshCode}})])])],1)],1):e._e(),t("el-form-item",[t("el-button",{staticClass:"login-submit",attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(e._s(e.$t("login.submit"))+"\n    ")])],1),t("el-dialog",{attrs:{title:"用户信息选择","append-to-body":"",visible:e.userBox,width:"350px"},on:{"update:visible":function(t){e.userBox=t}}},[t("avue-form",{attrs:{option:e.userOption},on:{submit:e.submitLogin},model:{value:e.userForm,callback:function(t){e.userForm=t},expression:"userForm"}})],1)],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),s=(n("6762"),n("2fdb"),n("5880")),a=n("ccbe"),l=n("c24f"),c=n("0e0b");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"userlogin",data:function(){return{tenantMode:this.website.tenantMode,loginForm:{tenantId:"322521",deptId:"",roleId:"",username:"admin",password:"",type:"account",code:"",key:"",image:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},loginRules:{tenantId:[{required:!1,message:"请输入租户ID",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,message:"密码长度最少为6位",trigger:"blur"}]},passwordType:"password",userBox:!1,userForm:{deptId:"",roleId:""},userOption:{labelWidth:70,submitBtn:!0,emptyBtn:!1,submitText:"登录",column:[{label:"部门",prop:"deptId",type:"select",props:{label:"deptName",value:"id"},dicUrl:"/api/blade-system/dept/select",span:24,display:!1,rules:[{required:!0,message:"请选择部门",trigger:"blur"}]},{label:"角色",prop:"roleId",type:"select",props:{label:"roleName",value:"id"},dicUrl:"/api/blade-system/role/select",span:24,display:!1,rules:[{required:!0,message:"请选择角色",trigger:"blur"}]}]}}},created:function(){this.getTenant(),this.refreshCode()},mounted:function(){},watch:{"loginForm.deptId":function(){var e=this.findObject(this.userOption.column,"deptId");this.loginForm.deptId.includes(",")?(e.dicUrl="/api/blade-system/dept/select?deptId=".concat(this.loginForm.deptId),e.display=!0):e.dicUrl=""},"loginForm.roleId":function(){var e=this.findObject(this.userOption.column,"roleId");this.loginForm.roleId.includes(",")?(e.dicUrl="/api/blade-system/role/select?roleId=".concat(this.loginForm.roleId),e.display=!0):e.dicUrl=""}},computed:d({},Object(s["mapGetters"])(["tagWel","userInfo"])),props:[],methods:{refreshCode:function(){var e=this;this.website.captchaMode&&Object(l["getCaptcha"])().then((function(t){var n=t.data;e.loginForm.key=n.key,e.loginForm.image=n.image}))},showPassword:function(){""===this.passwordType?this.passwordType="password":this.passwordType=""},submitLogin:function(e,t){""!==e.deptId&&(this.loginForm.deptId=e.deptId),""!==e.roleId&&(this.loginForm.roleId=e.roleId),this.handleLogin(),t()},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(t){var n=e.$loading({lock:!0,text:"登录中,请稍后。。。",spinner:"el-icon-loading"});e.$store.dispatch("LoginByUsername",e.loginForm).then((function(){if(e.website.switchMode){var t=e.userInfo.dept_id,o=e.userInfo.role_id;if(t.includes(",")||o.includes(","))return e.loginForm.deptId=t,e.loginForm.roleId=o,e.userBox=!0,n.close(),!1}e.$router.push({path:e.tagWel.value}),n.close()})).catch((function(){n.close(),e.refreshCode()}))}}))},getTenant:function(){var e=this,t=Object(c["e"])();Object(a["info"])(t).then((function(t){var n=t.data;n.success&&n.data.tenantId&&(e.tenantMode=!1,e.loginForm.tenantId=n.data.tenantId,e.$parent.$refs.login.style.backgroundImage="url(".concat(n.data.backgroundUrl,")"))}))}}},f=p,g=n("2877"),m=Object(g["a"])(f,o,r,!1,null,null,null);t["default"]=m.exports},"8d82":function(e,t,n){},"9f58":function(e,t,n){"use strict";n("6299")},a5fa:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"error-page"},[t("div",{staticClass:"img",staticStyle:{"background-image":"url('/img/bg/404.svg')"}}),t("div",{staticClass:"content"},[t("h1",[e._v("404")]),t("div",{staticClass:"desc"},[e._v("抱歉，你访问的页面不存在")]),t("div",{staticClass:"actions"},[t("router-link",{attrs:{to:{path:"/"}}},[t("el-button",{attrs:{type:"primary"}},[e._v("返回首页")])],1)],1)])])},r=[],i={name:"error-404"},s=i,a=(n("d9e0"),n("2877")),l=Object(a["a"])(s,o,r,!1,null,"5e9f17e3",null);t["default"]=l.exports},a8d0:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"error-page"},[t("div",{staticClass:"img",staticStyle:{"background-image":"url('/img/bg/403.svg')"}}),t("div",{staticClass:"content"},[t("h1",[e._v("403")]),t("div",{staticClass:"desc"},[e._v("抱歉，你无权访问该页面")]),t("div",{staticClass:"actions"},[t("router-link",{attrs:{to:{path:"/"}}},[t("el-button",{attrs:{type:"primary"}},[e._v("返回首页")])],1)],1)])])},r=[],i={name:"error-403"},s=i,a=(n("f2cf"),n("2877")),l=Object(a["a"])(s,o,r,!1,null,"2be0fc08",null);t["default"]=l.exports},acd4:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[t("el-form-item",{attrs:{prop:"phone"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.phone")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}},[t("i",{staticClass:"icon-shouji",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.code")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[t("i",{staticClass:"icon-yanzhengma",staticStyle:{"margin-top":"6px"},attrs:{slot:"prefix"},slot:"prefix"}),t("template",{slot:"append"},[t("span",{staticClass:"msg-text",class:[{display:e.msgKey}],on:{click:e.handleSend}},[e._v(e._s(e.msgText))])])],2)],1),t("el-form-item",[t("el-button",{staticClass:"login-submit",attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(e._s(e.$t("login.submit")))])],1)],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),s=n("c54a"),a=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={name:"codelogin",data:function(){var e=function(e,t,n){Object(s["h"])(t)[0]?n(new Error(Object(s["h"])(t)[1])):n()},t=function(e,t,n){4!==t.length?n(new Error("请输入4位数的验证码")):n()};return{msgText:"",msgTime:"",msgKey:!1,loginForm:{phone:"",code:""},loginRules:{phone:[{required:!0,trigger:"blur",validator:e}],code:[{required:!0,trigger:"blur",validator:t}]}}},created:function(){this.msgText=this.config.MSGINIT,this.msgTime=this.config.MSGTIME},mounted:function(){},computed:c(c({},Object(a["mapGetters"])(["tagWel"])),{},{config:function(){return{MSGINIT:this.$t("login.msgText"),MSGSCUCCESS:this.$t("login.msgSuccess"),MSGTIME:60}}}),props:[],methods:{handleSend:function(){var e=this;if(!this.msgKey){this.msgText=this.msgTime+this.config.MSGSCUCCESS,this.msgKey=!0;var t=setInterval((function(){e.msgTime--,e.msgText=e.msgTime+e.config.MSGSCUCCESS,0===e.msgTime&&(e.msgTime=e.config.MSGTIME,e.msgText=e.config.MSGINIT,e.msgKey=!1,clearInterval(t))}),1e3)}},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&e.$store.dispatch("LoginByPhone",e.loginForm).then((function(){e.$router.push({path:e.tagWel.value})}))}))}}},d=u,p=(n("6c7be"),n("2877")),f=Object(p["a"])(d,o,r,!1,null,null,null);t["default"]=f.exports},c1a1:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("basic-container",[t("iframe",{ref:"iframe",staticClass:"iframe",attrs:{src:e.src}})])},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("6b54"),n("a481"),n("ade3")),s=n("5880"),a=n("323e"),l=n.n(a);n("a5d8");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"AvueIframe",data:function(){return{urlPath:this.getUrlPath()}},created:function(){l.a.configure({showSpinner:!1})},mounted:function(){this.load(),this.resize()},props:["routerPath"],watch:{$route:function(){this.load()},routerPath:function(){this.urlPath=this.getUrlPath()}},computed:u(u({},Object(s["mapGetters"])(["screen"])),{},{src:function(){return this.$route.query.src?this.$route.query.src.replace("$","#"):this.urlPath}}),methods:{show:function(){l.a.start()},hide:function(){l.a.done()},resize:function(){var e=this;window.onresize=function(){e.iframeInit()}},load:function(){var e=this;this.show();var t=!0;void 0!==this.$route.query.src&&-1===this.$route.query.src.indexOf("?")&&(t=!1);var n=[];for(var o in this.$route.query)"src"!==o&&"name"!==o&&"i18n"!==o&&n.push("".concat(o,"= this.$route.query[key]"));n=n.join("&").toString(),this.$route.query.src=t?"".concat(this.$route.query.src).concat(n.length>0?"&list":""):"".concat(this.$route.query.src).concat(n.length>0?"?list":"");var r=3,i=setInterval((function(){r--,0===r&&(e.hide(),clearInterval(i))}),1e3);this.iframeInit()},iframeInit:function(){var e=this,t=this.$refs.iframe,n=document.documentElement.clientHeight-(screen>1?200:130);t&&(t.style.height="".concat(n,"px"),t.attachEvent?t.attachEvent("onload",(function(){e.hide()})):t.onload=function(){e.hide()})},getUrlPath:function(){var e=window.location.href;return e=e.replace("/myiframe",""),e}}},p=d,f=(n("173c"),n("2877")),g=Object(f["a"])(p,o,r,!1,null,null,null);t["default"]=g.exports},d9e0:function(e,t,n){"use strict";n("628c")},ea87:function(e,t,n){"use strict";n("f73f")},f0c3:function(e,t,n){},f2cf:function(e,t,n){"use strict";n("21b1")},f73f:function(e,t,n){},fd8e:function(e,t,n){"use strict";n("f0c3")}}]);